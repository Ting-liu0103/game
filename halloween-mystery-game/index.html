<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="萬聖夜驚變：化裝舞會謎案 - 一個充滿謎團的互動式推理遊戲">
    <meta name="keywords" content="萬聖節,推理遊戲,謎案,化裝舞會,互動遊戲">
    <meta name="author" content="Halloween Mystery Game">
    <title>萬聖夜驚變：化裝舞會謎案</title>
    
    <!-- 預載入字體 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;500;600;700&family=Creepster&display=swap" rel="stylesheet">
    
    <!-- 樣式表 -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    
    <!-- PWA 支援 -->
    <meta name="theme-color" content="#ff6b35">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body class="game-body">
    <!-- 無障礙跳轉連結 -->
    <a href="#main-content" class="skip-link">跳至主要內容</a>
    
    <!-- 載入畫面 -->
    <div class="loading-screen" id="loading-screen">
        <div class="loading-content">
            <div class="pumpkin-loader">🎃</div>
            <h2>萬聖夜驚變</h2>
            <div class="loading-bar">
                <div class="loading-progress" id="loading-progress"></div>
            </div>
            <p class="loading-text" id="loading-text">正在準備驚悚體驗...</p>
        </div>
    </div>

    <!-- 主遊戲容器 -->
    <div class="game-container" id="game-container">
        <!-- 遊戲標題區 -->
        <header class="game-header">
            <h1 class="game-title">
                <span class="title-main">🎭 萬聖夜驚變</span>
                <span class="title-sub">化裝舞會謎案</span>
            </h1>
            
            <!-- 遊戲狀態顯示 -->
            <div class="game-status">
                <div class="status-item">
                    <span class="status-icon">🏠</span>
                    <span id="current-location">準備開始</span>
                </div>
                <div class="status-item">
                    <span class="status-icon">🔍</span>
                    <span id="clues-count">線索: 0/4</span>
                </div>
                <div class="status-item">
                    <span class="status-icon">💡</span>
                    <span id="hints-remaining">提示: 3/3</span>
                </div>
                <div class="status-item">
                    <span class="status-icon">🎯</span>
                    <span id="score-display">分數: 0</span>
                </div>
            </div>
            
            <!-- 進度條 -->
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <div class="progress-text">
                    關卡進度: <span id="progress-current">0</span>/<span id="progress-total">7</span>
                </div>
            </div>
        </header>

        <!-- 主遊戲區域 -->
        <main class="game-main" id="main-content">
            <div class="log-container">
                <!-- 遊戲日誌 -->
                <div class="game-log" id="log" tabindex="0" role="log" aria-live="polite" aria-label="遊戲日誌">
                    <div class="welcome-message">
                        <h2>🎭 歡迎來到萬聖夜驚變</h2>
                        <p>在這個充滿謎團的化裝舞會中，真相隱藏在每個面具之下...</p>
                        <p>輸入 <code>/start</code> 開始你的推理之旅</p>
                    </div>
                </div>
                
                <!-- 輸入區域 -->
                <div class="input-container">
                    <div class="input-wrapper">
                        <input 
                            type="text" 
                            id="input" 
                            class="game-input" 
                            placeholder="輸入你的調查行動或推理..." 
                            autocomplete="off"
                            aria-label="遊戲輸入框"
                            maxlength="200"
                        >
                        <button id="send" class="send-button" aria-label="發送">
                            <span class="send-icon">📤</span>
                        </button>
                    </div>
                    
                    <!-- 輸入建議 -->
                    <div class="input-suggestions" id="input-suggestions" style="display: none;"></div>
                </div>
            </div>
        </main>

        <!-- 側邊欄 -->
        <aside class="game-sidebar">
            <!-- 快速動作按鈕 -->
            <div class="quick-actions">
                <button id="hint-btn" class="quick-btn" aria-label="獲取提示">
                    <span class="btn-icon">💡</span>
                    <span class="btn-text">獲取提示</span>
                    <div class="tooltip">獲取當前關卡的提示</div>
                </button>
                
                <button id="status-btn" class="quick-btn" aria-label="查看狀態">
                    <span class="btn-icon">📊</span>
                    <span class="btn-text">查看狀態</span>
                    <div class="tooltip">查看遊戲進度和統計</div>
                </button>
                
                <button id="save-btn" class="quick-btn" aria-label="保存遊戲">
                    <span class="btn-icon">💾</span>
                    <span class="btn-text">保存遊戲</span>
                    <div class="tooltip">保存當前遊戲進度</div>
                </button>
                
                <button id="load-btn" class="quick-btn" aria-label="載入遊戲">
                    <span class="btn-icon">📂</span>
                    <span class="btn-text">載入遊戲</span>
                    <div class="tooltip">載入已保存的遊戲</div>
                </button>
            </div>
            
            <!-- 線索收集區 -->
            <div class="clues-section">
                <h3 class="section-title">🔍 收集的線索</h3>
                <div class="clues-list" id="clues-list">
                    <div class="no-clues">尚未發現任何線索</div>
                </div>
            </div>
            
            <!-- 成就系統 -->
            <div class="achievements-section">
                <h3 class="section-title">🏆 成就系統</h3>
                <div class="achievements-list" id="achievements-list">
                    <div class="achievement locked">
                        <span class="achievement-icon">🔒</span>
                        <span class="achievement-name">初探真相</span>
                    </div>
                    <div class="achievement locked">
                        <span class="achievement-icon">🔒</span>
                        <span class="achievement-name">名偵探</span>
                    </div>
                    <div class="achievement locked">
                        <span class="achievement-icon">🔒</span>
                        <span class="achievement-name">完美主義者</span>
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <!-- 工具按鈕 -->
    <div class="utility-buttons">
        <button id="settings-btn" class="utility-btn" aria-label="遊戲設定" title="遊戲設定">
            ⚙️
        </button>
        <button id="fullscreen-btn" class="utility-btn" aria-label="全螢幕模式" title="全螢幕模式">
            🔳
        </button>
        <button id="help-btn" class="utility-btn" aria-label="遊戲說明" title="遊戲說明">
            ❓
        </button>
    </div>

    <!-- 設定面板 -->
    <div class="settings-panel" id="settings-panel">
        <div class="settings-content">
            <div class="settings-header">
                <h3>⚙️ 遊戲設定</h3>
                <button id="close-settings" class="close-btn" aria-label="關閉設定">✕</button>
            </div>
            
            <div class="settings-body">
                <!-- 音效設定 -->
                <div class="setting-group">
                    <h4>🔊 音效設定</h4>
                    
                    <div class="setting-item">
                        <label class="setting-label">
                            <input type="checkbox" id="sound-toggle" checked>
                            音效
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <label class="setting-label">
                            <input type="checkbox" id="music-toggle" checked>
                            背景音樂
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <label class="setting-label">
                            音量: <span id="volume-value">70</span>%
                            <input 
                                type="range" 
                                id="volume-slider" 
                                class="volume-slider" 
                                min="0" 
                                max="100" 
                                value="70"
                                aria-label="音量調節"
                            >
                        </label>
                    </div>
                </div>
                
                <!-- 遊戲設定 -->
                <div class="setting-group">
                    <h4>🎮 遊戲設定</h4>
                    
                    <div class="setting-item">
                        <label class="setting-label">
                            難度
                            <select id="difficulty-select" class="difficulty-select">
                                <option value="easy">簡單</option>
                                <option value="normal" selected>普通</option>
                                <option value="hard">困難</option>
                            </select>
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <button id="reset-game" class="reset-btn">重置遊戲</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 音效元素 -->
    <audio id="thunder-sound" preload="auto">
        <source src="sounds/thunder.mp3" type="audio/mpeg">
        <source src="sounds/thunder.ogg" type="audio/ogg">
    </audio>
    
    <audio id="ambient-sound" preload="auto" loop>
        <source src="sounds/ambient.mp3" type="audio/mpeg">
        <source src="sounds/ambient.ogg" type="audio/ogg">
    </audio>
    
    <audio id="success-sound" preload="auto">
        <source src="sounds/success.mp3" type="audio/mpeg">
        <source src="sounds/success.ogg" type="audio/ogg">
    </audio>
    
    <audio id="error-sound" preload="auto">
        <source src="sounds/error.mp3" type="audio/mpeg">
        <source src="sounds/error.ogg" type="audio/ogg">
    </audio>

    <!-- JavaScript -->
    <script src="app.js"></script>
    
</body>
</html>
